---
title: Configure a Default Memory Provider
sidebarTitle: Default Memory Provider
description: Set up a default persistent memory provider for your agents
icon: brain
---

This guide focuses on configuring a default memory provider for ControlFlow. For detailed information on using memory, including custom providers and available configurations, please refer to the [Memory doc](/patterns/memory).

ControlFlow's [memory](/patterns/memory) feature allows agents to store and retrieve information across multiple workflows. Memory modules are backed by a vector database, configured using a `MemoryProvider`. 

Setting up a default provider simplifies the process of creating memory objects throughout your application. Once configured, you can create memory objects without specifying a provider each time.

## Install dependencies

To use a provider, you must first install its dependencies. Please refer to the [Memory doc](/patterns/memory) to see all supported providers and their required dependencies. 

For example, to use the [Chroma](https://trychroma.com/) provider, you need to install `chromadb`:

```bash
pip install chromadb
```


## Configure default provider

There are two ways to set up a default provider: using a string setting for common defaults, or instantiating a custom provider. Here, we'll use a persistent Chroma database as our example.

### String configurations

For simple provider setups, you can use a string value with the `provider` parameter:

<CodeGroup>
```bash Environment variable
export CONTROLFLOW_MEMORY_PROVIDER="chroma-db"
```
```python Runtime
import controlflow as cf

cf.settings.memory_provider = "chroma-db"
```
</CodeGroup>

For a list of available string configurations, see the [Memory pattern guide](/patterns/memory).

### Custom provider configuration

For more advanced setups, instantiate a provider with custom settings and assign it to the ControlFlow default. Note this must be done at runtime.

```python
import controlflow as cf
from controlflow.memory.providers.chroma import ChromaMemory

# Set the default provider
cf.defaults.memory_provider = ChromaMemory(
    client=chromadb.PersistentClient(path="/custom/path"),
    collection_name="my-collection-{key}"
)
```

## Using the default provider

Once you've set a default provider, you can create memory objects that use it automatically:

```python
import controlflow as cf

weather_memory = cf.Memory(
    key="weather", 
    instructions="Store information about the weather."
)
```

